(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{362:function(s,a,t){"use strict";t.r(a);var n=t(42),r=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"sonar-sonarscanner"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sonar-sonarscanner"}},[s._v("#")]),s._v(" Sonar & SonarScanner")]),s._v(" "),t("h2",{attrs:{id:"sonar"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sonar"}},[s._v("#")]),s._v(" Sonar")]),s._v(" "),t("p",[s._v("Sonar (SonarQube)是一个开源平台，用于管理源代码的质量。Sonar 不只是一个质量数据报告工具，更是代码质量管理平台。支持的语言包括：Java、PHP、C#、C、Cobol、PL/SQL、Flex 等.")]),s._v(" "),t("h3",{attrs:{id:"特点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#特点"}},[s._v("#")]),s._v(" 特点")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("代码覆盖：通过单元测试，将会显示哪行代码被选中")])]),s._v(" "),t("li",[t("p",[s._v("改善编码规则")])]),s._v(" "),t("li",[t("p",[s._v("搜寻编码规则：按照名字，插件，激活级别和类别进行查询")])]),s._v(" "),t("li",[t("p",[s._v("项目搜寻：按照项目的名字进行查询")])]),s._v(" "),t("li",[t("p",[s._v("对比数据：比较同一张表中的任何测量的趋势")])])]),s._v(" "),t("h3",{attrs:{id:"前置条件-java-jdk"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前置条件-java-jdk"}},[s._v("#")]),s._v(" 前置条件 Java JDK")]),s._v(" "),t("p",[s._v("项目运行环境依赖 Java")]),s._v(" "),t("p",[s._v("可以通过 "),t("RouterLink",{attrs:{to:"/blog/java/java.html#安装"}},[s._v("Java JDK 安装")])],1),s._v(" "),t("h3",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),t("p",[s._v("首先通过 "),t("a",{attrs:{href:"https://www.sonarqube.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网 SonarQube"),t("OutboundLink")],1),s._v(" 获得下载地址")]),s._v(" "),t("p",[s._v("通过 "),t("RouterLink",{attrs:{to:"/blog/linux/linux.html#scp"}},[s._v("linux 命令 scp")]),s._v(" 命令远程发送至远程 linux 平台(mac)")],1),s._v(" "),t("h4",{attrs:{id:"sonarqube-运行条件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sonarqube-运行条件"}},[s._v("#")]),s._v(" Sonarqube 运行条件")]),s._v(" "),t("p",[s._v("必须是非 root 用户运行")]),s._v(" "),t("p",[s._v("如何创建用户，"),t("RouterLink",{attrs:{to:"/blog/linux/linux_centos.html#新建用户"}},[s._v("新建用户")]),s._v("，例：我用户名为 sonar")],1),s._v(" "),t("h4",{attrs:{id:"添加权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加权限"}},[s._v("#")]),s._v(" 添加权限")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# root 用户登录 cd /etc/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost etc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#chmod u+w sudoers")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost etc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#vim sudoers")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在 root 后追加 sonar")]),s._v("\nsonar  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ALL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ALL"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("   ALL\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保存退出 :wq")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 复原权限")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost etc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#chmod u-w sudoers")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h4",{attrs:{id:"解压"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解压"}},[s._v("#")]),s._v(" 解压")]),s._v(" "),t("p",[s._v("远程端")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 上传到 linux root/opt 下")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过 unzip sonarqube-8.4.0.35506.zip")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在当前目录下得到 sonarqube-8.4.0.35506")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果不想看见后缀 mv sonarqube-8.4.0.35506 sonarqube 即可")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\njdk-14.0.1_linux-x64_bin.rpm  rh  sonarqube  sonarqube-8.4.0.35506.zip\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h4",{attrs:{id:"更改用户所有者-权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#更改用户所有者-权限"}},[s._v("#")]),s._v(" 更改用户所有者 & 权限")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更改用户组")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#chown -R sonar:sonar sonarqube")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换用户")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost opt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#su sonar")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更改文件权限")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果在操作 sonarqube 提示权限不足")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sonar@localhost opt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#chmod 777 sonarqube")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h4",{attrs:{id:"首次运行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#首次运行"}},[s._v("#")]),s._v(" 首次运行")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 是什么系统选择对应的版本")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sonar@localhost opt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#cd /sonarqube/bin/linux-x86-64")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# linux")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 首次需要使用 console 参数启动， 可能的参数: start | stop | restart | status")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sonar@localhost linux-x86-64"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#./sonar.sh console")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 第二次")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sonar@localhost linux-x86-64"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./sonar.sh start")]),s._v("\nStarting SonarQube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nStarted SonarQube.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("默认监听 9000 端口，访问远程服务器 <远程地址:9000>")]),s._v(" "),t("p",[s._v("本地")]),s._v(" "),t("p",[s._v("在本地浏览器访问 <远程地址:9000>")]),s._v(" "),t("p",[t("strong",[s._v("Congratulations!")]),s._v(" 恭喜启动完成")]),s._v(" "),t("h3",{attrs:{id:"登录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#登录"}},[s._v("#")]),s._v(" 登录")]),s._v(" "),t("p",[s._v("默认登录名: admin")]),s._v(" "),t("p",[s._v("默认密码: admin")]),s._v(" "),t("h3",{attrs:{id:"汉化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#汉化"}},[s._v("#")]),s._v(" 汉化")]),s._v(" "),t("p",[s._v("在本地浏览器访问 <远程地址:9000> "),t("strong",[s._v("注意：是你本机 不是服务端")])]),s._v(" "),t("p",[t("img",{attrs:{src:"/engineering/sonar.png",alt:"汉化流程"}})]),s._v(" "),t("h2",{attrs:{id:"sonarscanner"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sonarscanner"}},[s._v("#")]),s._v(" SonarScanner")]),s._v(" "),t("p",[s._v("是 sonar 本地开发机管理的命令行终端工具")]),s._v(" "),t("p",[s._v("通过以下流程 安装")]),s._v(" "),t("h3",{attrs:{id:"先使用-sonar-浏览器端创建项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#先使用-sonar-浏览器端创建项目"}},[s._v("#")]),s._v(" 先使用 sonar 浏览器端创建项目")]),s._v(" "),t("p",[t("img",{attrs:{src:"/engineering/sonar_create.png",alt:"创建"}})]),s._v(" "),t("h3",{attrs:{id:"配置项目名称"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置项目名称"}},[s._v("#")]),s._v(" 配置项目名称")]),s._v(" "),t("p",[t("img",{attrs:{src:"/engineering/project_name.png",alt:"创建名称"}})]),s._v(" "),t("h3",{attrs:{id:"配置项目token"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置项目token"}},[s._v("#")]),s._v(" 配置项目token")]),s._v(" "),t("p",[t("img",{attrs:{src:"/engineering/create_token.png",alt:"创建token"}})]),s._v(" "),t("h3",{attrs:{id:"配置开发机"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置开发机"}},[s._v("#")]),s._v(" 配置开发机")]),s._v(" "),t("p",[t("img",{attrs:{src:"/engineering/download_sonar_scanner.png",alt:"配置开发机"}})]),s._v(" "),t("h3",{attrs:{id:"下载sonarscanner"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载sonarscanner"}},[s._v("#")]),s._v(" 下载SonarScanner")]),s._v(" "),t("p",[s._v("可能后边会更换: "),t("a",{attrs:{href:"https://docs.sonarqube.org/latest/analysis/scan/sonarscanner/",target:"_blank",rel:"noopener noreferrer"}},[s._v("飞机票地址"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("img",{attrs:{src:"/engineering/unzip_sonar_scanner.png",alt:"下载"}})]),s._v(" "),t("h3",{attrs:{id:"配置本地环境变量-mac"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置本地环境变量-mac"}},[s._v("#")]),s._v(" 配置本地环境变量(mac)")]),s._v(" "),t("p",[s._v("编辑本地的shell 环境变量 "),t("code",[s._v(".zshrc")]),s._v(" 或者 "),t("code",[s._v(".bash_profile")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sonar-scanner 追加bin")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# export SCANNER_HOME="你下载的sonar-scanner地址"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SCANNER_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/Users/hondry/opt/sonar-scanner"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$SCANNER_HOME")]),s._v("/bin\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 然后退出编辑 source  .bash_profile 或者 zsh .zshrc 使更改生效 例：zsh shell 下")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("zsh")]),s._v(" .zshrc\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 然后在 shell 中 校验是否安装完成")]),s._v("\nsonar-scanner -v\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[t("strong",[s._v("Congratulations!")]),s._v(" 恭喜本地命令配置完成")]),s._v(" "),t("p",[s._v("好了，接下来挑选一个项目吧")]),s._v(" "),t("h3",{attrs:{id:"配置sonarscanner"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置sonarscanner"}},[s._v("#")]),s._v(" 配置SonarScanner")]),s._v(" "),t("p",[s._v("配置开发目录文件 "),t("code",[s._v("sonar-project.properties")]),s._v("，没有就新建")]),s._v(" "),t("p",[s._v("我选中的 github 上的 quill")]),s._v(" "),t("p",[t("img",{attrs:{src:"/engineering/selected_project.png",alt:"选定的项目"}})]),s._v(" "),t("p",[s._v("然后将 "),t("RouterLink",{attrs:{to:"/blog/engineering/sonar.html#配置开发机"}},[s._v("配置开发机")])],1),s._v(" "),t("p",[s._v("第五步内容拷贝至 "),t("code",[s._v("sonar-project.properties")]),s._v(" 文件下")]),s._v(" "),t("p",[t("img",{attrs:{src:"/engineering/paste_shell.png",alt:"粘贴配置"}})]),s._v(" "),t("p",[s._v("更改你要扫描测试的目录，比如 "),t("code",[s._v("core")])]),s._v(" "),t("p",[t("img",{attrs:{src:"/engineering/changed_source.png",alt:"更改目录"}})]),s._v(" "),t("p",[s._v("好了，使用终端 shell(zsh/bash) 执行你的这个 "),t("code",[s._v("sonar-project.properties")]),s._v(" 文件")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# zsh 下 耐心等待终端结果")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("zsh")]),s._v(" sonar-project.properties\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:"/engineering/success.png",alt:"成功"}})]),s._v(" "),t("p",[s._v("接下来刷新你的本地浏览器")]),s._v(" "),t("p",[t("img",{attrs:{src:"/engineering/refresh_browser.png",alt:"成功"}})]),s._v(" "),t("p",[t("strong",[s._v("Congratulations!")]),s._v(" 恭喜配置完成🎉")])])}),[],!1,null,null,null);a.default=r.exports}}]);